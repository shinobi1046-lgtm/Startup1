{
  "id": "adyen",
  "name": "Adyen",
  "description": "Adyen global payment processing platform",
  "category": "Finance",
  "icon": "adyen",
  "color": "#0ABF53",
  "version": "1.0.0",
  "authentication": {
    "type": "api_key",
    "config": {
      "type": "header",
      "name": "X-API-Key"
    }
  },
  "baseUrl": "https://checkout-test.adyen.com/v70",
  "actions": [
    {
      "id": "test_connection",
      "name": "Test Connection",
      "description": "Test the connection to Adyen",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      }
    },
    {
      "id": "create_payment",
      "name": "Create Payment",
      "description": "Create a new payment",
      "parameters": {
        "type": "object",
        "properties": {
          "amount": {
            "type": "object",
            "properties": {
              "currency": {"type": "string"},
              "value": {"type": "number"}
            },
            "description": "Payment amount"
          },
          "reference": {
            "type": "string",
            "description": "Payment reference"
          },
          "paymentMethod": {
            "type": "object",
            "properties": {
              "type": {"type": "string"},
              "encryptedCardNumber": {"type": "string"},
              "encryptedExpiryMonth": {"type": "string"},
              "encryptedExpiryYear": {"type": "string"},
              "encryptedSecurityCode": {"type": "string"}
            },
            "description": "Payment method details"
          },
          "returnUrl": {
            "type": "string",
            "format": "uri",
            "description": "Return URL after payment"
          },
          "merchantAccount": {
            "type": "string",
            "description": "Merchant account identifier"
          },
          "shopperEmail": {
            "type": "string",
            "format": "email",
            "description": "Shopper email"
          },
          "shopperReference": {
            "type": "string",
            "description": "Shopper reference"
          },
          "countryCode": {
            "type": "string",
            "description": "Country code"
          }
        },
        "required": ["amount", "reference", "paymentMethod", "returnUrl", "merchantAccount"],
        "additionalProperties": false
      }
    },
    {
      "id": "capture_payment",
      "name": "Capture Payment",
      "description": "Capture an authorized payment",
      "parameters": {
        "type": "object",
        "properties": {
          "paymentPspReference": {
            "type": "string",
            "description": "Payment PSP reference"
          },
          "amount": {
            "type": "object",
            "properties": {
              "currency": {"type": "string"},
              "value": {"type": "number"}
            },
            "description": "Amount to capture"
          },
          "merchantAccount": {
            "type": "string",
            "description": "Merchant account"
          },
          "reference": {
            "type": "string",
            "description": "Capture reference"
          }
        },
        "required": ["paymentPspReference", "amount", "merchantAccount"],
        "additionalProperties": false
      }
    },
    {
      "id": "refund_payment",
      "name": "Refund Payment",
      "description": "Refund a payment",
      "parameters": {
        "type": "object",
        "properties": {
          "paymentPspReference": {
            "type": "string",
            "description": "Payment PSP reference"
          },
          "amount": {
            "type": "object",
            "properties": {
              "currency": {"type": "string"},
              "value": {"type": "number"}
            },
            "description": "Refund amount"
          },
          "merchantAccount": {
            "type": "string",
            "description": "Merchant account"
          },
          "reference": {
            "type": "string",
            "description": "Refund reference"
          }
        },
        "required": ["paymentPspReference", "amount", "merchantAccount"],
        "additionalProperties": false
      }
    }
  ],
  "triggers": [
    {
      "id": "payment_success",
      "name": "Payment Success",
      "description": "Triggered when a payment is successful",
      "type": "webhook",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "pspReference": {"type": "string"},
          "merchantReference": {"type": "string"},
          "eventCode": {"type": "string"},
          "success": {"type": "boolean"}
        }
      }
    }
  ],
  "testConnection": {
    "method": "POST",
    "endpoint": "/payments"
  }
}