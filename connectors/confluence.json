{
  "id": "confluence",
  "name": "Atlassian Confluence",
  "description": "Atlassian Confluence team collaboration and knowledge management platform",
  "category": "Documentation",
  "icon": "confluence",
  "color": "#172B4D",
  "version": "1.0.0",
  "authentication": {
    "type": "oauth2",
    "config": {
      "authUrl": "https://auth.atlassian.com/authorize",
      "tokenUrl": "https://auth.atlassian.com/oauth/token",
      "scopes": ["read:confluence-content.all", "write:confluence-content", "read:confluence-space.summary"]
    }
  },
  "baseUrl": "https://api.atlassian.com/ex/confluence",
  "actions": [
    {
      "id": "test_connection",
      "name": "Test Connection",
      "description": "Test the connection to Confluence",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      }
    },
    {
      "id": "create_page",
      "name": "Create Page",
      "description": "Create a new page in Confluence",
      "parameters": {
        "type": "object",
        "properties": {
          "cloudid": {
            "type": "string",
            "description": "Atlassian cloud ID"
          },
          "type": {
            "type": "string",
            "enum": ["page", "blogpost"],
            "default": "page",
            "description": "Content type"
          },
          "title": {
            "type": "string",
            "description": "Page title"
          },
          "space": {
            "type": "object",
            "properties": {
              "key": {"type": "string"}
            },
            "description": "Space information"
          },
          "body": {
            "type": "object",
            "properties": {
              "storage": {
                "type": "object",
                "properties": {
                  "value": {"type": "string"},
                  "representation": {"type": "string", "enum": ["storage", "view", "wiki"]}
                }
              }
            },
            "description": "Page content"
          },
          "ancestors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {"type": "string"}
              }
            },
            "description": "Parent pages"
          },
          "metadata": {
            "type": "object",
            "description": "Page metadata"
          }
        },
        "required": ["cloudid", "title", "space", "body"],
        "additionalProperties": false
      }
    },
    {
      "id": "update_page",
      "name": "Update Page",
      "description": "Update an existing page",
      "parameters": {
        "type": "object",
        "properties": {
          "cloudid": {
            "type": "string",
            "description": "Atlassian cloud ID"
          },
          "id": {
            "type": "string",
            "description": "Page ID"
          },
          "type": {
            "type": "string",
            "enum": ["page", "blogpost"],
            "description": "Content type"
          },
          "title": {
            "type": "string",
            "description": "Page title"
          },
          "body": {
            "type": "object",
            "properties": {
              "storage": {
                "type": "object",
                "properties": {
                  "value": {"type": "string"},
                  "representation": {"type": "string"}
                }
              }
            },
            "description": "Updated page content"
          },
          "version": {
            "type": "object",
            "properties": {
              "number": {"type": "number"}
            },
            "description": "Version information"
          }
        },
        "required": ["cloudid", "id", "version"],
        "additionalProperties": false
      }
    },
    {
      "id": "get_page",
      "name": "Get Page",
      "description": "Get page information",
      "parameters": {
        "type": "object",
        "properties": {
          "cloudid": {
            "type": "string",
            "description": "Atlassian cloud ID"
          },
          "id": {
            "type": "string",
            "description": "Page ID"
          },
          "expand": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Properties to expand"
          },
          "status": {
            "type": "string",
            "enum": ["current", "trashed", "draft"],
            "description": "Page status filter"
          },
          "version": {
            "type": "number",
            "description": "Specific version number"
          }
        },
        "required": ["cloudid", "id"],
        "additionalProperties": false
      }
    },
    {
      "id": "search_content",
      "name": "Search Content",
      "description": "Search for content in Confluence",
      "parameters": {
        "type": "object",
        "properties": {
          "cloudid": {
            "type": "string",
            "description": "Atlassian cloud ID"
          },
          "cql": {
            "type": "string",
            "description": "Confluence Query Language (CQL) query"
          },
          "cqlcontext": {
            "type": "string",
            "description": "Context for CQL query"
          },
          "expand": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Properties to expand"
          },
          "start": {
            "type": "number",
            "description": "Starting index for results"
          },
          "limit": {
            "type": "number",
            "minimum": 1,
            "maximum": 200,
            "default": 25,
            "description": "Number of results to return"
          },
          "includeArchivedSpaces": {
            "type": "boolean",
            "description": "Include archived spaces"
          }
        },
        "required": ["cloudid", "cql"],
        "additionalProperties": false
      }
    },
    {
      "id": "get_spaces",
      "name": "Get Spaces",
      "description": "Get Confluence spaces",
      "parameters": {
        "type": "object",
        "properties": {
          "cloudid": {
            "type": "string",
            "description": "Atlassian cloud ID"
          },
          "spaceKey": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Filter by space keys"
          },
          "type": {
            "type": "string",
            "enum": ["global", "personal"],
            "description": "Space type filter"
          },
          "status": {
            "type": "string",
            "enum": ["current", "archived"],
            "description": "Space status filter"
          },
          "label": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Filter by labels"
          },
          "favourite": {
            "type": "boolean",
            "description": "Filter by favourite status"
          },
          "expand": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Properties to expand"
          },
          "start": {
            "type": "number",
            "description": "Starting index"
          },
          "limit": {
            "type": "number",
            "minimum": 1,
            "maximum": 200,
            "default": 25,
            "description": "Number of spaces to return"
          }
        },
        "required": ["cloudid"],
        "additionalProperties": false
      }
    },
    {
      "id": "delete_page",
      "name": "Delete Page",
      "description": "Delete a page",
      "parameters": {
        "type": "object",
        "properties": {
          "cloudid": {
            "type": "string",
            "description": "Atlassian cloud ID"
          },
          "id": {
            "type": "string",
            "description": "Page ID to delete"
          },
          "status": {
            "type": "string",
            "enum": ["current", "trashed"],
            "description": "Current page status"
          }
        },
        "required": ["cloudid", "id"],
        "additionalProperties": false
      }
    },
    {
      "id": "add_comment",
      "name": "Add Comment",
      "description": "Add a comment to a page",
      "parameters": {
        "type": "object",
        "properties": {
          "cloudid": {
            "type": "string",
            "description": "Atlassian cloud ID"
          },
          "container": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "type": {"type": "string"}
            },
            "description": "Container (page) information"
          },
          "body": {
            "type": "object",
            "properties": {
              "storage": {
                "type": "object",
                "properties": {
                  "value": {"type": "string"},
                  "representation": {"type": "string"}
                }
              }
            },
            "description": "Comment content"
          },
          "type": {
            "type": "string",
            "enum": ["comment"],
            "default": "comment",
            "description": "Content type"
          }
        },
        "required": ["cloudid", "container", "body"],
        "additionalProperties": false
      }
    }
  ],
  "triggers": [
    {
      "id": "page_created",
      "name": "Page Created",
      "description": "Triggered when a new page is created",
      "type": "webhook",
      "parameters": {
        "type": "object",
        "properties": {
          "spaceKey": {
            "type": "string",
            "description": "Filter by space"
          }
        },
        "required": [],
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "type": {"type": "string"},
          "title": {"type": "string"},
          "space": {"type": "object"}
        }
      }
    },
    {
      "id": "page_updated",
      "name": "Page Updated",
      "description": "Triggered when a page is updated",
      "type": "webhook",
      "parameters": {
        "type": "object",
        "properties": {
          "spaceKey": {
            "type": "string",
            "description": "Filter by space"
          }
        },
        "required": [],
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "title": {"type": "string"},
          "version": {"type": "object"}
        }
      }
    }
  ],
  "testConnection": {
    "method": "GET",
    "endpoint": "/{cloudid}/wiki/rest/api/space"
  }
}