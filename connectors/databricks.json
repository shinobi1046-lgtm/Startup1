{
  "id": "databricks",
  "name": "Databricks",
  "description": "Databricks unified analytics platform for big data and machine learning",
  "category": "Data Analytics",
  "icon": "databricks",
  "color": "#FF3621",
  "version": "1.0.0",
  "authentication": {
    "type": "api_key",
    "config": {
      "type": "header",
      "name": "Authorization",
      "prefix": "Bearer"
    }
  },
  "baseUrl": "https://{workspace}.cloud.databricks.com/api/2.0",
  "actions": [
    {
      "id": "test_connection",
      "name": "Test Connection",
      "description": "Test the connection to Databricks",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      }
    },
    {
      "id": "list_clusters",
      "name": "List Clusters",
      "description": "List available clusters",
      "parameters": {
        "type": "object",
        "properties": {
          "can_use_client": {
            "type": "string",
            "description": "Client type filter"
          }
        },
        "required": [],
        "additionalProperties": false
      }
    },
    {
      "id": "get_cluster",
      "name": "Get Cluster",
      "description": "Get cluster information",
      "parameters": {
        "type": "object",
        "properties": {
          "cluster_id": {
            "type": "string",
            "description": "Cluster ID"
          }
        },
        "required": ["cluster_id"],
        "additionalProperties": false
      }
    },
    {
      "id": "start_cluster",
      "name": "Start Cluster",
      "description": "Start a cluster",
      "parameters": {
        "type": "object",
        "properties": {
          "cluster_id": {
            "type": "string",
            "description": "Cluster ID to start"
          }
        },
        "required": ["cluster_id"],
        "additionalProperties": false
      }
    },
    {
      "id": "stop_cluster",
      "name": "Stop Cluster",
      "description": "Stop a cluster",
      "parameters": {
        "type": "object",
        "properties": {
          "cluster_id": {
            "type": "string",
            "description": "Cluster ID to stop"
          }
        },
        "required": ["cluster_id"],
        "additionalProperties": false
      }
    },
    {
      "id": "submit_run",
      "name": "Submit Run",
      "description": "Submit a new job run",
      "parameters": {
        "type": "object",
        "properties": {
          "run_name": {
            "type": "string",
            "description": "Name for the run"
          },
          "new_cluster": {
            "type": "object",
            "properties": {
              "spark_version": {"type": "string"},
              "node_type_id": {"type": "string"},
              "num_workers": {"type": "number"}
            },
            "description": "New cluster configuration"
          },
          "existing_cluster_id": {
            "type": "string",
            "description": "Existing cluster ID"
          },
          "notebook_task": {
            "type": "object",
            "properties": {
              "notebook_path": {"type": "string"},
              "base_parameters": {"type": "object"}
            },
            "description": "Notebook task configuration"
          },
          "spark_jar_task": {
            "type": "object",
            "properties": {
              "main_class_name": {"type": "string"},
              "parameters": {"type": "array", "items": {"type": "string"}}
            },
            "description": "Spark JAR task configuration"
          },
          "spark_python_task": {
            "type": "object",
            "properties": {
              "python_file": {"type": "string"},
              "parameters": {"type": "array", "items": {"type": "string"}}
            },
            "description": "Spark Python task configuration"
          },
          "spark_submit_task": {
            "type": "object",
            "properties": {
              "parameters": {"type": "array", "items": {"type": "string"}}
            },
            "description": "Spark submit task configuration"
          },
          "timeout_seconds": {
            "type": "number",
            "description": "Job timeout in seconds"
          },
          "idempotency_token": {
            "type": "string",
            "description": "Idempotency token"
          }
        },
        "required": [],
        "additionalProperties": false
      }
    },
    {
      "id": "get_run",
      "name": "Get Run",
      "description": "Get run information",
      "parameters": {
        "type": "object",
        "properties": {
          "run_id": {
            "type": "number",
            "description": "Run ID"
          },
          "include_history": {
            "type": "boolean",
            "description": "Include run history"
          }
        },
        "required": ["run_id"],
        "additionalProperties": false
      }
    },
    {
      "id": "cancel_run",
      "name": "Cancel Run",
      "description": "Cancel a run",
      "parameters": {
        "type": "object",
        "properties": {
          "run_id": {
            "type": "number",
            "description": "Run ID to cancel"
          }
        },
        "required": ["run_id"],
        "additionalProperties": false
      }
    },
    {
      "id": "list_jobs",
      "name": "List Jobs",
      "description": "List jobs",
      "parameters": {
        "type": "object",
        "properties": {
          "limit": {
            "type": "number",
            "minimum": 1,
            "maximum": 25,
            "default": 20,
            "description": "Number of jobs to return"
          },
          "offset": {
            "type": "number",
            "description": "Pagination offset"
          },
          "expand_tasks": {
            "type": "boolean",
            "description": "Include task details"
          }
        },
        "required": [],
        "additionalProperties": false
      }
    },
    {
      "id": "create_job",
      "name": "Create Job",
      "description": "Create a new job",
      "parameters": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Job name"
          },
          "new_cluster": {
            "type": "object",
            "description": "New cluster configuration"
          },
          "existing_cluster_id": {
            "type": "string",
            "description": "Existing cluster ID"
          },
          "notebook_task": {
            "type": "object",
            "description": "Notebook task configuration"
          },
          "spark_jar_task": {
            "type": "object",
            "description": "Spark JAR task configuration"
          },
          "libraries": {
            "type": "array",
            "items": {"type": "object"},
            "description": "Job libraries"
          },
          "email_notifications": {
            "type": "object",
            "properties": {
              "on_start": {"type": "array", "items": {"type": "string"}},
              "on_success": {"type": "array", "items": {"type": "string"}},
              "on_failure": {"type": "array", "items": {"type": "string"}}
            },
            "description": "Email notification settings"
          },
          "timeout_seconds": {
            "type": "number",
            "description": "Job timeout in seconds"
          },
          "max_retries": {
            "type": "number",
            "description": "Maximum retry attempts"
          },
          "min_retry_interval_millis": {
            "type": "number",
            "description": "Minimum retry interval in milliseconds"
          },
          "retry_on_timeout": {
            "type": "boolean",
            "description": "Retry on timeout"
          },
          "schedule": {
            "type": "object",
            "properties": {
              "quartz_cron_expression": {"type": "string"},
              "timezone_id": {"type": "string"}
            },
            "description": "Job schedule configuration"
          },
          "max_concurrent_runs": {
            "type": "number",
            "description": "Maximum concurrent runs"
          }
        },
        "required": [],
        "additionalProperties": false
      }
    }
  ],
  "triggers": [
    {
      "id": "job_completed",
      "name": "Job Completed",
      "description": "Triggered when a job completes",
      "type": "webhook",
      "parameters": {
        "type": "object",
        "properties": {
          "job_id": {
            "type": "number",
            "description": "Filter by job ID"
          }
        },
        "required": [],
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "run_id": {"type": "number"},
          "job_id": {"type": "number"},
          "run_name": {"type": "string"},
          "state": {"type": "object"}
        }
      }
    },
    {
      "id": "cluster_started",
      "name": "Cluster Started",
      "description": "Triggered when a cluster starts",
      "type": "webhook",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "cluster_id": {"type": "string"},
          "cluster_name": {"type": "string"},
          "state": {"type": "string"}
        }
      }
    }
  ],
  "testConnection": {
    "method": "GET",
    "endpoint": "/clusters/list"
  }
}