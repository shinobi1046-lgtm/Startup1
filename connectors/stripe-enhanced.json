{
  "id": "stripe-enhanced",
  "name": "Stripe Enhanced",
  "description": "Enhanced Stripe payment processing with advanced subscription and invoicing features",
  "category": "Payments",
  "icon": "stripe",
  "color": "#635BFF",
  "version": "2.0.0",
  "authentication": {
    "type": "api_key",
    "config": {
      "apiKeyLocation": "header",
      "apiKeyName": "Authorization",
      "apiKeyValue": "Bearer {api_key}"
    }
  },
  "baseUrl": "https://api.stripe.com/v1",
  "actions": [
    {
      "id": "test_connection",
      "name": "Test Connection",
      "description": "Test the connection to Stripe",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      }
    },
    {
      "id": "create_customer",
      "name": "Create Customer",
      "description": "Create a new customer",
      "parameters": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Customer email"
          },
          "name": {
            "type": "string",
            "description": "Customer name"
          },
          "description": {
            "type": "string",
            "description": "Customer description"
          },
          "metadata": {
            "type": "object",
            "description": "Set of key-value pairs for storing additional information"
          }
        },
        "required": [],
        "additionalProperties": false
      }
    },
    {
      "id": "create_payment_intent",
      "name": "Create Payment Intent",
      "description": "Create a new payment intent",
      "parameters": {
        "type": "object",
        "properties": {
          "amount": {
            "type": "number",
            "minimum": 1,
            "description": "Amount in smallest currency unit"
          },
          "currency": {
            "type": "string",
            "description": "Three-letter ISO currency code"
          },
          "customer": {
            "type": "string",
            "description": "Customer ID"
          },
          "description": {
            "type": "string",
            "description": "Payment description"
          },
          "metadata": {
            "type": "object",
            "description": "Set of key-value pairs for storing additional information"
          }
        },
        "required": ["amount", "currency"],
        "additionalProperties": false
      }
    },
    {
      "id": "create_subscription",
      "name": "Create Subscription",
      "description": "Create a new subscription",
      "parameters": {
        "type": "object",
        "properties": {
          "customer": {
            "type": "string",
            "description": "Customer ID"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "price": {"type": "string"},
                "quantity": {"type": "number", "minimum": 1}
              },
              "required": ["price"],
              "additionalProperties": false
            },
            "description": "Subscription items"
          },
          "metadata": {
            "type": "object",
            "description": "Set of key-value pairs for storing additional information"
          }
        },
        "required": ["customer", "items"],
        "additionalProperties": false
      }
    },
    {
      "id": "create_invoice",
      "name": "Create Invoice",
      "description": "Create a new invoice",
      "parameters": {
        "type": "object",
        "properties": {
          "customer": {
            "type": "string",
            "description": "Customer ID"
          },
          "description": {
            "type": "string",
            "description": "Invoice description"
          },
          "metadata": {
            "type": "object",
            "description": "Set of key-value pairs for storing additional information"
          }
        },
        "required": ["customer"],
        "additionalProperties": false
      }
    }
  ],
  "triggers": [
    {
      "id": "customer_created",
      "name": "Customer Created",
      "description": "Triggered when a new customer is created",
      "type": "webhook",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "email": {"type": "string"},
          "name": {"type": "string"},
          "description": {"type": "string"},
          "created": {"type": "number"}
        }
      }
    },
    {
      "id": "payment_intent_succeeded",
      "name": "Payment Intent Succeeded",
      "description": "Triggered when a payment intent succeeds",
      "type": "webhook",
      "parameters": {
        "type": "object",
        "properties": {
          "customer": {
            "type": "string",
            "description": "Filter by customer ID"
          }
        },
        "required": [],
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "amount": {"type": "number"},
          "currency": {"type": "string"},
          "customer": {"type": "string"},
          "status": {"type": "string"}
        }
      }
    }
  ],
  "testConnection": {
    "method": "GET",
    "endpoint": "/account"
  }
}