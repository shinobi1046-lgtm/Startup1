{
  "id": "bigquery",
  "name": "Google BigQuery",
  "description": "Google BigQuery data warehouse and analytics platform",
  "category": "Database",
  "icon": "bigquery",
  "color": "#4285F4",
  "version": "1.0.0",
  "authentication": {
    "type": "oauth2",
    "config": {
      "authUrl": "https://accounts.google.com/o/oauth2/auth",
      "tokenUrl": "https://oauth2.googleapis.com/token",
      "scopes": ["https://www.googleapis.com/auth/bigquery"]
    }
  },
  "baseUrl": "https://bigquery.googleapis.com/bigquery/v2",
  "actions": [
    {
      "id": "test_connection",
      "name": "Test Connection",
      "description": "Test the connection to BigQuery",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      }
    },
    {
      "id": "execute_query",
      "name": "Execute Query",
      "description": "Execute a SQL query",
      "parameters": {
        "type": "object",
        "properties": {
          "projectId": {
            "type": "string",
            "description": "Google Cloud Project ID"
          },
          "query": {
            "type": "string",
            "description": "SQL query to execute"
          },
          "useLegacySql": {
            "type": "boolean",
            "default": false,
            "description": "Use legacy SQL syntax"
          },
          "maxResults": {
            "type": "number",
            "description": "Maximum number of results"
          },
          "timeoutMs": {
            "type": "number",
            "description": "Query timeout in milliseconds"
          },
          "dryRun": {
            "type": "boolean",
            "default": false,
            "description": "Validate query without executing"
          },
          "parameters": {
            "type": "array",
            "items": {"type": "object"},
            "description": "Query parameters"
          }
        },
        "required": ["projectId", "query"],
        "additionalProperties": false
      }
    },
    {
      "id": "create_dataset",
      "name": "Create Dataset",
      "description": "Create a new dataset",
      "parameters": {
        "type": "object",
        "properties": {
          "projectId": {
            "type": "string",
            "description": "Project ID"
          },
          "datasetId": {
            "type": "string",
            "description": "Dataset ID"
          },
          "description": {
            "type": "string",
            "description": "Dataset description"
          },
          "location": {
            "type": "string",
            "description": "Dataset location"
          },
          "defaultTableExpirationMs": {
            "type": "string",
            "description": "Default table expiration time"
          }
        },
        "required": ["projectId", "datasetId"],
        "additionalProperties": false
      }
    },
    {
      "id": "create_table",
      "name": "Create Table",
      "description": "Create a new table",
      "parameters": {
        "type": "object",
        "properties": {
          "projectId": {
            "type": "string",
            "description": "Project ID"
          },
          "datasetId": {
            "type": "string",
            "description": "Dataset ID"
          },
          "tableId": {
            "type": "string",
            "description": "Table ID"
          },
          "schema": {
            "type": "object",
            "properties": {
              "fields": {
                "type": "array",
                "items": {"type": "object"}
              }
            },
            "description": "Table schema"
          },
          "description": {
            "type": "string",
            "description": "Table description"
          }
        },
        "required": ["projectId", "datasetId", "tableId", "schema"],
        "additionalProperties": false
      }
    },
    {
      "id": "insert_rows",
      "name": "Insert Rows",
      "description": "Insert rows into a table",
      "parameters": {
        "type": "object",
        "properties": {
          "projectId": {
            "type": "string",
            "description": "Project ID"
          },
          "datasetId": {
            "type": "string",
            "description": "Dataset ID"
          },
          "tableId": {
            "type": "string",
            "description": "Table ID"
          },
          "rows": {
            "type": "array",
            "items": {"type": "object"},
            "description": "Rows to insert"
          },
          "ignoreUnknownValues": {
            "type": "boolean",
            "default": false,
            "description": "Ignore unknown values"
          },
          "skipInvalidRows": {
            "type": "boolean",
            "default": false,
            "description": "Skip invalid rows"
          }
        },
        "required": ["projectId", "datasetId", "tableId", "rows"],
        "additionalProperties": false
      }
    },
    {
      "id": "list_datasets",
      "name": "List Datasets",
      "description": "List datasets in a project",
      "parameters": {
        "type": "object",
        "properties": {
          "projectId": {
            "type": "string",
            "description": "Project ID"
          },
          "maxResults": {
            "type": "number",
            "description": "Maximum number of results"
          },
          "all": {
            "type": "boolean",
            "description": "Include hidden datasets"
          }
        },
        "required": ["projectId"],
        "additionalProperties": false
      }
    },
    {
      "id": "list_tables",
      "name": "List Tables",
      "description": "List tables in a dataset",
      "parameters": {
        "type": "object",
        "properties": {
          "projectId": {
            "type": "string",
            "description": "Project ID"
          },
          "datasetId": {
            "type": "string",
            "description": "Dataset ID"
          },
          "maxResults": {
            "type": "number",
            "description": "Maximum number of results"
          }
        },
        "required": ["projectId", "datasetId"],
        "additionalProperties": false
      }
    }
  ],
  "triggers": [
    {
      "id": "job_completed",
      "name": "Job Completed",
      "description": "Triggered when a BigQuery job completes",
      "type": "webhook",
      "parameters": {
        "type": "object",
        "properties": {
          "projectId": {
            "type": "string",
            "description": "Filter by project"
          }
        },
        "required": [],
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "jobId": {"type": "string"},
          "status": {"type": "string"},
          "projectId": {"type": "string"}
        }
      }
    }
  ],
  "testConnection": {
    "method": "GET",
    "endpoint": "/projects"
  }
}